digraph {

	node [shape=box];
	Tracker;
	Peer [shape=box3d];
	{ rank = same;
          PeerMgr;
	  ChokeMgr;
        }

	OMBox [shape=Msquare];

	Status;
	FS;
	Main;
	Console;
	Timer;
	PieceMgr;

	Listener;

	node [shape=diamond];
	HTTP;
	Socket;

	edge [style=dotted,color=deepskyblue4];
	Tracker -> HTTP;
	HTTP    -> Tracker;
	Peer -> Socket;
	Listener-> Socket;

	edge [style=solid,color=black];

	Tracker -> PeerMgr;
	Tracker -> Timer [style=dashed,color=darkgreen];
	Tracker -> Status

	Timer -> Tracker;

	OMBox -> Peer;
	PeerMgr -> Peer [style=dashed,color=darkgreen];
	PeerMgr -> Status;
	ChokeMgr -> OMBox;
	PeerMgr -> ChokeMgr;

	Peer -> PeerMgr;

	FS -> Peer;
	Peer -> Status;

	Peer -> PieceMgr;

	PieceMgr -> FS;

	FS -> Status;

	Main -> Console;
	Main -> FS;

	Console -> Main;

	Status -> Tracker;
	Status -> Main;

	Listener -> Peer [style=dashed,color=darkgreen];
}